<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Parallax Scroll Demo - moutain view</title>
	<script type="text/javascript" src="js/zepto.min.js"></script>
	<script type="text/javascript" src="js/Swipe.js"></script>
	<script type="text/javascript" src="js/ParallaxScroll.js"></script>
	<style>
	body{
		margin: 0;
		padding: 0;
		font-family: arial;
	}
	a{text-decoration: none;}
	</style>
</head>
<body>

<h1 style="text-align: center;">Parallax Scroll Demo - moutain view</h1>

<div id="draw" style="position: relative; margin: 50px auto; width: 640px; height: 240px;
	overflow: hidden; background: #eee;">
</div>

<p style="text-align: center;">images stolen from <a href="http://stephband.info/jparallax/">http://stephband.info/jparallax/</a></p>


<script type="text/javascript">
var layers = [
	{
		//height: 288,
		width: 920,
		"children": [
			{
				"img": "1_mountains.png"
			},
			{
				y: 300
			}
		]
	},
	{
		//height: 288,
		width: 1100,
		"children": [
			{
				y: 50,
				"img": "2_hill.png"
			}
		]
	},
	{
		width: 1136,
		"children": [
			{
				y: 80,
				"img": "3_wood.png"
			}
		]
	}
];


for(var i in layers){
	var layer = layers[i];
	for(var j in layer.children){
		if(layer.children[j].img){
			layer.children[j].img = './imgs/stephband.info/' + layer.children[j].img;
		}
	}
}


var scroll = new ParallaxScroll('#draw');
scroll.load(layers);
scroll.move(-scroll.max_width/2, 0);
console.log(scroll.scale, scroll.width, scroll.height);

$('#draw').on('mousemove', function(e){
	var ox = e.pageX - $('#draw').offset().left;
	var oy = e.pageY - $('#draw').offset().top;
	if(oy < scroll.height * 0.2){
		oy = 0;
	}
	if(oy > scroll.height * 0.6){
		oy = scroll.height * 0.6;
	}
	var dx = -ox - scroll.x;
	var dy = -oy - scroll.y;
	scroll.move(dx, dy);
});
var swipe = new Swipe($('#draw'));
swipe.onswipe = function(e){
	e.preventDefault();
	scroll.move(e.dx, e.dy);
}



</script>


</body>
</html>
